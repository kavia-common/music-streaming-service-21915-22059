{"is_source_file": true, "format": "Python", "description": "Source code for a FastAPI-based monitoring and logging API service, including endpoints for log and metric ingestion, queries, alert management, health checks, and compliance reporting.", "external_files": ["json", "os", "threading", "datetime", "typing", "fastapi", "fastapi.middleware.cors", "pydantic"], "external_methods": ["fastapi.Depends", "fastapi.FastAPI", "fastapi.Header", "fastapi.HTTPException", "fastapi.Query", "fastapi.status", "fastapi.middleware.cors.CORSMiddleware", "pydantic.BaseModel", "pydantic.Field"], "published": ["health_check", "ingest_logs", "ingest_metrics", "query_logs", "query_metrics", "get_alerts", "upsert_alert", "get_compliance_reports"], "classes": [{"name": "LogIngest", "description": "Pydantic model for log ingestion data"}, {"name": "MetricIngest", "description": "Pydantic model for metrics ingestion data"}, {"name": "AlertRule", "description": "Pydantic model for defining alert rules"}, {"name": "AlertOut", "description": "Pydantic model for alert output data including last triggered info"}], "methods": [{"name": "_load_api_keys_from_env", "description": "Loads API keys from environment variable into a dictionary"}, {"name": "auth_bearer_dependency", "description": "Middleware dependency for authenticating requests via Bearer token"}, {"name": "_load_json_file", "description": "Loads JSON data from specified file, returns default if missing or invalid"}, {"name": "_save_json_file", "description": "Saves data to JSON file asynchronously"}, {"name": "_bootstrap_store", "description": "Initial load of persisted data from files into in-memory stores"}, {"name": "_persist_async", "description": "Triggers background thread to persist in-memory stores to disk"}, {"name": "_paginate", "description": "Utility to paginate a list of items"}, {"name": "_filter_logs", "description": "Filters log entries based on source, level, start/end datetime"}, {"name": "_filter_metrics", "description": "Filters metrics entries based on source, metric name, start/end datetime"}, {"name": "health_check", "description": "Liveness probe endpoint"}, {"name": "ingest_logs", "description": "API endpoint to ingest a log entry"}, {"name": "ingest_metrics", "description": "API endpoint to ingest metrics data"}, {"name": "query_logs", "description": "Query logs with filtering and pagination"}, {"name": "query_metrics", "description": "Query metrics with filtering and pagination"}, {"name": "get_alerts", "description": "Retrieve current alert rules and statuses"}, {"name": "upsert_alert", "description": "Create or update an alert rule"}, {"name": "get_compliance_reports", "description": "Generate minimal compliance reports based on ingested data"}], "calls": ["json.load", "json.dump", "os.path.join", "os.path.exists", "datetime.fromisoformat", "datetime.utcnow", "os.replace", "threading.Thread"], "search-terms": ["MonitoringLogging", "api", "log ingestion", "metrics ingestion", "alert management", "compliance report", "fastapi", "in-memory store", "API key auth", "JSON persistence"], "state": 2, "file_id": 5, "knowledge_revision": 31, "git_revision": "6385e3ae307ec2083002d5b9ecbb541f1a85ea70", "revision_history": [{"11": ""}, {"14": "ee642739d8e52ebede6bade82cd99b775234de49"}, {"17": "25552160c8b1c53c63ddddab92465016509d17e1"}, {"22": "25552160c8b1c53c63ddddab92465016509d17e1"}, {"25": "6385e3ae307ec2083002d5b9ecbb541f1a85ea70"}, {"31": "6385e3ae307ec2083002d5b9ecbb541f1a85ea70"}], "ctags": [], "hash": "bcfb21f5e719e872505f168c61b62c8c", "format-version": 4, "code-base-name": "Monitoring&Logging", "filename": "Monitoring&Logging/music-streaming-service-21915-22059/MonitoringLogging/src/api/main.py"}